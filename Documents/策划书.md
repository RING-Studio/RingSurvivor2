# 《花园都市的沙心水源》游戏策划书

## 省流

交付游戏项目

- 一个完整可玩的游戏关卡场景
	- 可以调整波次、怪物种类
	- 可切换地形
- AVG场景
	- 支持左右两个角色立绘显示、表情差分
	- 对话显示
	- 提供脚本和调用示例
- 各主要场景（见概念图）以及其他通用场景如设置界面、保存读取、开始界面，及其相关功能
- 数值系统
	- 已有配件、车辆、武器、升级选项、敌人实现（见数据），从配置文件读取具体数值
	- 提供扩展接口，后期可以添加配件、车辆、武器等

---

### **一、核心**

**游戏类型：** 2D俯视角车辆类幸存者 + AVG叙事

**核心玩法：** 驾驶车辆在沙漠地图中进行类幸存者战斗，外部部件改装提升战力与赋予不同体验

**特色：**

- **车辆操控**：简易物理驾驶系统（移动/撞击/地形互动）赋予幸存者独特操作体验
- **模块化车辆改装**
- **AVG结合**

---

### **二、世界观与美术风格**

**（局部）世界观设定：**

- 拜拉达
沙漠中的绿洲城市，故事的主舞台，依靠特殊矿石赤锌带来的能源扩大绿洲并进行工业化，但近年来由于种种原因面临矿石枯竭的危机
- 水源镇
  
	拜拉达沙区140号矿区旁的小镇"水源镇"，出现“污染”：
	
	- 绿洲被污染，枯竭，最终变成沙漠
	- 生物变异成为“污染生物”（沙虫、蝎、蜘蛛、蜥蜴等，重度污染者污染化严重）
	- 活跃于城市周围的土匪集团"秃鹫"
	
	玩家为普通基层官员，被下派调查此处污染（通过剧情玩家会知道是因为特殊矿石枯竭）
	
- 污染处理
  
	玩家被下派调查同时也带来最新的污染转换设备，击杀污染生物减低污染值，同时部分转换为能量
	
	- 能量可用于在一局幸存者内暂时强化部件（武器或部分特殊部件）或创造部件
	- 一局幸存者结束回到营地后，获得的能量值可用于局外解锁/升级
	- 污染减少值与能量转换值比值由**污染转换率**决定

**美术风格：**

- 二次元、沙漠绿洲
- 车辆设计：模块化改装车（引擎/武器/装甲等）

---

### **三、核心系统设计**

### **1. 车辆操控系统**

- **驾驶模拟：**
	- 通用
		- 左右控制转向
		- 上下控制前进、倒车
		- 高机动车型可空格漂移
	- 可能有特殊车型拥有不同驾驶方式
- **地形交互**：
  
  
	| **地形类型** | **修正** | **视觉反馈** |
	| --- | --- | --- |
	| 硬化沙地 | 无 | 无 |
	| 松软沙地 | 地面阻力+40%，转向速度-50% | 沙尘 |
	| 岩石区域 | 撞墙受伤+50% | 无 |
	| 绿洲浅滩 | 地面阻力+20% | 水花 |

### **2. 污染值系统**

- **污染值变动**：
	- 污染值：良好3000-、轻度3000、中度6000、重度8000、爆表10000+（浮点数类型）
	- 初始值：7000
	- 基础日增长：900/天（早午晚各增长300）
	- 降低方式：击杀污染怪
- **污染值影响**：
	- 全局污染值过低会提示玩家基本遇不到怪没必要出击
	- 游戏15天途中任意时刻污染满进入BAD END
- 区域污染值与全局污染值：
	- 区域污染值（任务污染值）
		- 任务初始污染值为（任务基础污染+全局污染值）/ 2
		- 影响任务中污染怪强度与出怪频率，变动值为
			- 强度=怪物基础污染*sqrt（区域污染值/7000），这里强度直接乘算生命与攻击等类似属性
			- 出怪频率=基础出怪频率*（区域污染值/7000）
		- 任务中转换污染会降区域污染值，值为（怪物污染值=怪物基础污染\*sqrt（区域污染值/7000））。而玩家获得能量则为击杀怪物的（怪物污染值\*污染转化率）
		- 区域污染值随时间提升，暂定 1.0/1秒
		- 可能有特殊事件导致污染值陡增或提升加速
		- 任务完成后任务影响的全局污染值变动（区域污染值变动值/2）
			- 全局游戏单位时间增长的300另算

### **3. 车辆改装系统及幸存者相关**

- 各种属性及配件见数据.xlsx
- 局内玩家击杀怪物获取经验（污染转换能量）以升级，类似吸血鬼幸存者
	- 升级弹窗三个选项，从配件池中随机抽取，抽取概率 由配件是否已拥有 和 配件稀有度 决定
	- 选中已拥有配件可以将其升级。满级的配件会再出现，但升级加成会减弱
	- 可以花费刷新点重选三个选项
- 局外玩家可以最多携带四个lv1道具进入游戏，这部分称为“车辆改装系统”
	- 玩家有多种车型可供选择，每种车型的配置会被保存
	- 玩家需要确定主武器、装甲类型，以及最多携带四种lv1配件进入战斗
- 详见概念图

### 3.5. 部分属性说明

- 软攻、硬攻、击穿（公式同样适用于敌方对玩家造成的伤害）

```python
def damage(基础伤害: int, 硬攻倍率: float, 软攻倍率: float, 穿深: int, 敌方装甲: int, 敌方覆甲率: float, 敌方击穿伤害减免: float) -> int:
	硬攻 = 基础伤害 * 硬攻倍率
	软攻 = 基础伤害 * 软攻倍率
	if 穿深 > 敌方装甲: # 击穿
		伤害 = 硬攻 + 软攻 * （1 - 敌方覆甲率）
		击穿伤害 = 硬攻 * 敌方覆甲率
		伤害 -= 击穿伤害 * 敌方击穿伤害减免
	else: # 未击穿
		伤害 = (硬攻 + 软攻) * (1 - 敌方覆甲率)
	
	return 伤害
```

### **4. 140号矿区外基地（玩家操作主界面，军营）**：

类似于主城，可操控主角移动，可与场景交互

| 交互对象 | **功能** |
| --- | --- |
| 各NPC | 对话/任务推进 |
| 科技站 | 被动升级 |
| 车 | 载具编辑/更换车型 |
| 出口 | 选择自由出击or执行任务 |

---

### **四、游戏流程**

- **新手教程阶段：**
	1. **AVG序章**：
		- 驾驶轻改装公务车进入沙漠
	2. **首战教学**：
		- 遭遇敌人 → 基础驾驶教学
		- 能量收集：靠近击杀掉落的能量晶体（经验值）以收集
		- 局内升级强化
	3. **精英遭遇战**：
		- 沙虫群挡路（向左行驶20km处，靠近后触发增援，女主A驾驶军用装甲车支援战斗）
	4. **击败精英**：
		- 教学关卡结算
- **每日循环机制：**
	- 每天 早上/下午/夜晚 三个单位时间
	- 每次执行任务默认消耗一单位时间（早午晚）；特殊任务或特殊对话消耗时间会单独提示
	- 出击/任务只能在早上或下午，消耗一单位时间

---

### **五、存档数据**

- 游戏流程状态
	- 天数
	- 时间段
	- 污染值
	- 任务进度/流程进度（已完成、已解锁、未解锁）
	- NPC对话进度（下一次对话会出什么）
- 当前选中
	- 当前选中车辆
	- 当前选中技能（被动效果）
- 车辆状态
	- 每辆车目前的配置方案

```
示例：
{
  "day": 5,
  "time": 1, (1~3代表早午晚）
  "pollution": 1919,
  "current": {
	  "vehicle": "official_car",
	  "skill": 
  },
  "vehicle": {
	"official_car": {
		"type": "official_car",
		"weapons": 
		"upgrades":  
	  },
	  "armored_car": {
	  
	  },
  },
}
```

---

### **六、内容规划**

**敌人类型：**

| **类别** | **特点** |
| --- | --- |
| 沙虫幼体 | 无 |
| 蝎 | 缓慢，护甲 |
| 蛛 | 迅速 |
| 蚁群 | 迅速、成群 |
| 秃鹫喽喽 | 远程 |
| 秃鹫车 | 远程+高机动车辆（有些武器的自动攻击会难以命中） |

### **七、详细内容**

见附属文件

[数据.xlsx](%E6%95%B0%E6%8D%AE.xlsx)

[概念图.pptx](%E6%A6%82%E5%BF%B5%E5%9B%BE.pptx)

### 八、交付目标

- 游戏项目
	- 完整可玩的游戏关卡场景
		- 可以调整波次、怪物种类
		- 可切换地形
	- AVG场景
		- 支持左右两个角色立绘显示、表情差分
		- 对话显示
		- 提供脚本和调用示例，后期可以根据编剧的要求新增对话
	- 各主要场景（见概念图）以及其他通用场景如设置界面、保存读取、开始界面，及其相关功能
	- 数值系统
		- 已有配件、车辆、武器、升级选项、敌人实现（见数据），从配置文件读取具体数值
		- 提供扩展接口，后期可以添加配件、车辆、武器等

### 九、开发记录

- Github
