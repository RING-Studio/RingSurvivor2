# 注意事项

更新日期：2026-02-14

## 1. 不考虑存档兼容

只要本条注意事项存在，本项目**永远不要考虑存档兼容问题**。

- 可以随时修改任何 `ID`、字段名、数据结构
- 不需要做"旧ID→新ID"的迁移映射
- 不需要保留旧格式的兼容层
- 改了就改了，旧存档作废即可

## 2. 禁止使用 `:=` 进行类型推断

GDScript 4.5.1 的 `:=` 在右侧返回 Variant 时会导致 Parse Error。
本项目**非必要不允许使用 `:=`**，一律使用显式类型声明。

- 正确：`var dist: float = global_position.distance_to(target.global_position)`
- 错误：`var dist := global_position.distance_to(target.global_position)`
- 正确：`var label: String = "hello"`
- 错误：`var label := "hello"`
- `const` 声明可以使用 `:=`（编译期常量不受影响），但也建议显式声明类型

## 3. 禁止 preload 自身所在的 .tscn

如果一个 `.gd` 脚本是某个 `.tscn` 的根节点脚本，**禁止在该脚本中 `preload` 自身的 `.tscn`**（循环加载会导致 `Parse Error: Busy`）。

- 需要在脚本中加载自身场景时，使用 `load()` 替代 `preload()`
- 正确：`var scene: PackedScene = load("res://path/to/self.tscn")`
- 错误：`var scene: PackedScene = preload("res://path/to/self.tscn")`  ← 循环加载
