# ROADMAP

更新日期：2026-02-10

## 资料口径与过期说明
- 主口径：`DOCUMENTS/升级合集.md`、`DOCUMENTS/配件系统实现方案.md`、`DOCUMENTS/关卡.md`、`DOCUMENTS/策划书.md`
- 参考：`DOCUMENTS/新數據.md`（内容不全，仅作对照）
- 过期：`DOCUMENTS/数据整理.md`、`DOCUMENTS/幸存者武器装甲配件测试文档.md`（旧设定与旧表）

## 当前实现基线（已具备）
- 玩家驾驶、碰撞受伤、经验升级、三选一升级流程
- 机炮主武器完整可用（扫射/风车/乱射/弹射/分裂/流血/溅射）
- 伤害公式（软攻/硬攻/穿深/覆甲率）与伤害数字颜色
- 升级池与品质、专属前置、前缀互斥
- 配件：地雷 + 专属强化（范围/装填速度/布雷/AT）；装填与冷却已统一为倍率设计（间隔=基础间隔/速度倍率，倍率≤0 为 INF）
- Level1 区域污染度与敌人生成框架

## 阶段 1：资料口径与数据收敛 ✅ 已完成
目标
- 明确文档与数据的唯一口径，消除历史冲突与旧表干扰
主要工作
- 统一升级 ID 与数值口径（如 `mine_range`、`mine_anti_tank`、`crit_rate` 品质）
- 对齐 `AbilityUpgradeData` / `UpgradeEffectManager` / `升级合集.md`
- 标记并隔离过期文档条目，避免被误用
验收标准
- 代码中所有升级条目在 `升级合集.md` 中可查且描述一致
- 关键冲突项完成统一并形成明确结论记录
- 升级池不再出现“文档不存在/代码无效果”的升级

**完成情况**：口径已统一（暴击/暴伤/冷却装置/地雷系）；射速·装填·冷却改为倍率设计并落地地雷；过期文档已标注；`cooling_device` 无冷却类配件时不入池。

## 阶段 2：核心战斗与关卡稳定
目标
- Level1 可稳定运行 5-10 分钟，升级与战斗无明显逻辑错误
主要工作
- 校验 Region 逻辑与点污染度/上限/倍率公式的一致性
- 完成精英/BOSS 标记逻辑（支持地雷·AT）
- 补齐关键 TODO（如地雷爆炸表现、hit 信号用途）
验收标准
- Region1/2/3 的生成上限与倍率随污染度变化可复现
- BOSS 只生成一次且 `is_boss` 为真，精英 `is_elite` 可正确识别
- 机炮/地雷/升级流程无报错，伤害颜色与暴击逻辑正确

## 阶段 3：通用升级与生存/机动扩展
目标
- 将文档中的通用升级完整落地为可用效果
主要工作
- 实装 `repair_kit`、`cabin_ac`、`heat_sink` 等生存类升级
- 实装 `christie_suspension`、`gas_turbine`、`hydro_pneumatic` 等机动类升级
- 实装 `addon_armor`、`relief_valve` 等击穿减伤逻辑
验收标准
- 新增升级可抽取并可叠加生效
- 移速与回复等数值变化可在游戏中验证
- 击穿减伤仅在穿深大于装甲厚度时生效

## 阶段 4：配件系统扩展
目标
- 从“地雷单配件”扩展为多配件组合玩法
主要工作
- 落地至少 3 个主动配件（烟雾弹/无线电/激光压制/外挂导弹任选）
- 落地 1-2 个被动配件（纤维内衬/爆反/红外对抗）
- 接入 `cooling_device` 的全局配件冷却效果
- 配件专属强化进入升级池并影响对应配件
验收标准
- 配件可在局内获得并触发效果，伤害来源显示为 `accessory`
- 专属强化仅在拥有对应配件时出现
- `cooling_device` 对所有配件冷却生效且可叠加

## 阶段 5：主武器扩展与差异化
目标
- 完成多主武器形态并形成玩法差异
主要工作
- 实装 `howitzer` / `tank_gun` / `missile` 中至少两种
- 补齐武器专属升级与 `exclusive_for` 规则
验收标准
- 切换主武器后控制器与升级池正确切换
- 不同主武器具备明显差异化射击方式

## 阶段 6：元进度、基地与叙事
目标
- 实现“局外基地—局内战斗—结算回基地”的循环
主要工作
- 污染值/天数/时间段推进与存档
- 基地交互（任务选择、载具编辑、AVG 对话）
验收标准
- 完整流程可跑通：开始界面 → 基地 → 关卡 → 结算 → 基地
- 存档可恢复污染值、天数、车辆配置与解锁内容
